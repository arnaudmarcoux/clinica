function segmentCAT12(image, spmfolder)    % avg_T1w format: 'path/to/image,1'    % avg_T1w is .nii file from the SerialLongitudinalRegistration of two timepoint T1w of one subject (longitudinal study)    % matlabpath is the path to the folder where spm12 (and cat12) matlab toolboxes are. ex: '/Users/emmaducos/Documents/MATLAB'    % TODO: put tpm path into variables    disp('****** running segment CAT12 **********')    warning on all    warning off backtrace    warning on verbose    if isempty(which('spm'))        throw(MException('SPMCheck:NotFound', 'SPM not in matlab path'));    end    [name, version] = spm('ver');    fprintf('SPM version: %s Release: %s\n',name, version);    fprintf('SPM path: %s\n', which('spm'));    spm('Defaults','PET');    if strcmp(name, 'SPM8') || strcmp(name(1:5), 'SPM12')        spm_jobman('initcfg');        spm_get_defaults('cmdline', 1);    end    tpm = fullfile(spmfolder, '/tpm/TPM.nii');    darteltpm = fullfile(spmfolder,'/toolbox/cat12/templates_1.50mm/Template_1_IXI555_MNI152.nii');    shootingtpm = fullfile(spmfolder, '/toolbox/cat12/templates_1.50mm/Template_0_IXI555_MNI152_GS.nii');    matlabbatch{1}.spm.tools.cat.estwrite.data = {image};    matlabbatch{1}.spm.tools.cat.estwrite.nproc = 10;    matlabbatch{1}.spm.tools.cat.estwrite.opts.tpm = {tpm};    matlabbatch{1}.spm.tools.cat.estwrite.opts.affreg = 'mni';    matlabbatch{1}.spm.tools.cat.estwrite.opts.biasstr = 0.5;    matlabbatch{1}.spm.tools.cat.estwrite.extopts.APP = 1070;    matlabbatch{1}.spm.tools.cat.estwrite.extopts.LASstr = 0.5;    matlabbatch{1}.spm.tools.cat.estwrite.extopts.gcutstr = 0;    matlabbatch{1}.spm.tools.cat.estwrite.extopts.registration.dartel.darteltpm = {darteltpm};    matlabbatch{1}.spm.tools.cat.estwrite.extopts.vox = 1.5;    matlabbatch{1}.spm.tools.cat.estwrite.extopts.restypes.fixed = [1 0.1];    matlabbatch{1}.spm.tools.cat.estwrite.output.surface = 0;    matlabbatch{1}.spm.tools.cat.estwrite.output.ROImenu.atlases.neuromorphometrics = 0;    matlabbatch{1}.spm.tools.cat.estwrite.output.ROImenu.atlases.lpba40 = 0;    matlabbatch{1}.spm.tools.cat.estwrite.output.ROImenu.atlases.cobra = 0;    matlabbatch{1}.spm.tools.cat.estwrite.output.ROImenu.atlases.hammers = 0;    matlabbatch{1}.spm.tools.cat.estwrite.output.GM.native = 1;    matlabbatch{1}.spm.tools.cat.estwrite.output.GM.mod = 0;    matlabbatch{1}.spm.tools.cat.estwrite.output.GM.dartel = 0;    matlabbatch{1}.spm.tools.cat.estwrite.output.WM.native = 1;    matlabbatch{1}.spm.tools.cat.estwrite.output.WM.mod = 0;    matlabbatch{1}.spm.tools.cat.estwrite.output.WM.dartel = 0;    matlabbatch{1}.spm.tools.cat.estwrite.output.biaswarped = 0;    matlabbatch{1}.spm.tools.cat.estwrite.output.jacobianwarped = 0;    matlabbatch{1}.spm.tools.cat.estwrite.output.warps = [0 0];    spm_jobman('run', matlabbatch);    disp('****** Segment CAT12 done **********')end